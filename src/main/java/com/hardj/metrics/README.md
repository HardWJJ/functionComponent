# 性能计数器

## 需要描述

- 功能性需求
    - 接口统计信息：包括接口响应时间的统计信息，以及接口调用次数的统计信息等。
    - 统计信息的类型：max、min、avg、percentile、count、tps 等。
    - 统计信息显示格式：Json、Html、自定义显示格式。
    - 统计信息显示终端：Console、Email、HTTP 网页、日志、自定义显示终端。
 
 - 非功能性需求
    - 易用性
        - 框架是否易集成、易插拔、跟业务代码是否松耦合、提供的接口是否够灵活等等
    - 性能
        - 减少框架本身的代码执行效率，对业务系统有太多性能上的影响。
    - 扩展性
        - 特指框架使用者可以在不修改框架源码，甚至不拿到框架源码的情况下，为框架扩展新的功能。
    - 容错性
        - 不能因为框架本身的异常导致接口请求出错。
    - 通用性
        - 为了提高框架的复用性，能够灵活应用到各种场景中。
    
    
## 四个模块

- 数据采集
    - 负责打点采集原始数据，包括记录每次接口请求的响应时间和请求时间。数据采集过程要高度容错，不能影响到接口本身的可用性。
- 存储
    - 负责将采集的原始数据保存下来，以便后面做聚合统计。数据的存储方式有多种，比如：Redis、MySQL、HBase、日志、文件、内存等。
- 聚合统计
    - 负责将原始数据聚合为统计数据，比如：max、min、avg、pencentile、count、tps 等。
- 显示
    - 负责将统计数据以某种格式显示到终端，比如：输出到命令行、邮件、网页、自定义显示终端等。
